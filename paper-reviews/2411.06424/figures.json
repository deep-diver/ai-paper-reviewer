[{"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/three_output_projections.png", "caption": "(a) MLP layer outputs projected to toxicity probe.", "description": "This figure shows the projection of MLP layer outputs onto a toxicity probe. The x-axis represents the MLP layer index, and the y-axis represents the toxicity projection value.  Three lines are plotted: one for the model before DPO (Direct Preference Optimization), one after ablating the top 200 most toxic neurons, and one after applying DPO. This visualization helps to understand how DPO and neuron ablation affect toxicity levels across different layers of the model.", "section": "Tracking toxic feature reduction across neurons"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/cum_sum_proj_diff.png", "caption": "(b) Cumulative toxicity reduction ranked by neurons.", "description": "This figure shows the cumulative toxicity reduction achieved by individual neurons in the model, ranked from most to least effective.  The x-axis represents the neurons ranked in order of their contribution to toxicity reduction, and the y-axis displays the cumulative sum of toxicity reduction. This visualization helps understand how different neurons contribute to the overall reduction in toxicity achieved by the DPO algorithm and whether the toxicity reduction is dominated by a small number of neurons or distributed more broadly.", "section": "Tracking toxic feature reduction across neurons"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/stacked_bar_dist.png", "caption": "Figure 1: Toxicity projection to the toxic probe across MLP layers and neurons. (a) Output projections of MLP layers before DPO (red), after ablating top 200 toxic neurons (yellow), and after DPO (green). (b) The cumulative sum of toxicity reduction contributed by neurons, with neurons ranked from highest to lowest toxicity reduction.", "description": "This figure visualizes the impact of direct preference optimization (DPO) on toxicity reduction within a language model. Panel (a) shows the projection of MLP layer outputs onto a toxicity probe, comparing the pre-DPO state (red), post-ablation of the top 200 most toxic neurons (yellow), and post-DPO state (green). This illustrates how DPO and ablation affect toxicity across different layers.  Panel (b) presents a cumulative sum of toxicity reduction, ordered by neuron contribution, starting from the neuron that contributed most to toxicity reduction down to the neuron contributing the least.  This highlights the overall impact of DPO on individual neurons, revealing that some neurons contribute positively and some negatively to toxicity after DPO, resulting in an overall decrease in toxicity. ", "section": "Tracking toxic feature reduction across neurons"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/top_200_to_10000_contributor_contribution.png", "caption": "(a)", "description": "Figure 1a displays the projection of MLP layer outputs onto a toxicity probe, comparing the pre-DPO, post-ablation (of top 200 toxic neurons), and post-DPO states.  It visually demonstrates how the toxicity levels change across different MLP layers in the model under each of these conditions. The plot shows a clear decrease in toxicity across layers after applying DPO compared to the pre-DPO state.  The effect of ablating the top 200 toxic neurons is also shown, revealing a smaller decrease in toxicity. This figure provides visual evidence supporting the claim that DPO\u2019s effect on toxicity is not solely due to dampening the most toxic neurons.", "section": "Tracking toxic feature reduction across neurons"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/top_500_contributor_illustration.png", "caption": "(b) Toxicity reduction by neuron groups.", "description": "This figure shows the contribution of four neuron groups to the overall toxicity reduction achieved by the DPO algorithm.  It breaks down the reduction into the contributions of four groups of neurons: \n\n1. **TP_:** Toxic neurons with less positive activation after DPO.\n2. **AN_:** Anti-toxic neurons with less negative activation after DPO.\n3. **TN+:** Toxic neurons with more negative activation after DPO.\n4. **AP+:** Anti-toxic neurons with more positive activation after DPO.\n\nThe figure visually represents these contributions, showing how each group's influence varies across the total number of neurons.  It demonstrates that while dampening toxic neurons (TP_) is a significant factor, the reduction also involves actively promoting anti-toxicity (AN_ and AP+) and using other neurons in a more complex way (TN+).", "section": "Identifying neuron groups for toxicity reduction"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/neuron_group_contribution_per_layer.png", "caption": "(c) Shifts in toxicity level by neuron groups.", "description": "This figure (Figure 2c) visualizes the changes in toxicity levels for the top 500 neurons after applying the direct preference optimization (DPO) algorithm. Each arrow represents a single neuron, showing the shift in its toxicity projection from before DPO to after DPO. The x-axis represents the cosine similarity of the neuron's value vector to the toxic probe direction (how toxic the neuron's contribution is), and the y-axis shows the change in toxicity projection.  The figure is color-coded to distinguish neurons belonging to four groups:  toxic neurons activated less positively (TP-), anti-toxic neurons activated less negatively (AN-), toxic neurons activated more negatively (TN+), and anti-toxic neurons activated more positively (AP+). This visualization helps to understand how DPO balances opposing effects of various neuron groups to achieve overall toxicity reduction.", "section": "4.3 Identifying neuron groups for toxicity reduction"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/acts_top_toxic_value_vectors_100.png", "caption": "Figure 2: Contributions of four neuron groups to toxicity reduction. (a) Proportions of toxicity reduction by each neuron group; (b) Stacked distribution of each group\u2019s contribution among the top 10000 neurons ranked by contribution. TP\u2212subscriptTP\\rm TP_{-}roman_TP start_POSTSUBSCRIPT - end_POSTSUBSCRIPT initially dominates, with AN\u2212subscriptAN\\rm AN_{-}roman_AN start_POSTSUBSCRIPT - end_POSTSUBSCRIPT gradually catching as neuron rank progresses; (c) Shifts in toxicity projection for the top 500 neurons ranked by contribution. Each arrow represents a neuron\u2019s projection change from pre-DPO to post-DPO levels, with all neurons shift with reduced toxicity.", "description": "Figure 2 details how four neuron groups contribute to the reduction in toxicity observed after applying direct preference optimization (DPO).  Panel (a) shows the percentage contribution of each group to the overall toxicity reduction. Panel (b) displays the cumulative contributions of these groups across the top 10,000 neurons, ordered by their contribution to toxicity reduction.  Initially, the 'TP-' group (toxic neurons with less positive activation) makes the largest contribution.  However, the 'AN-' group (anti-toxic neurons with less negative activation) increasingly contributes as one moves down the ranked neuron list. Panel (c) visualizes the changes in toxicity projection for the top 500 neurons, showing a decrease in toxicity for all neurons after DPO.", "section": "Identifying neuron groups for toxicity reduction"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/top_200_contributor_illustration.png", "caption": "Figure 3: Per-layer toxicity reduction by neuron groups. DPO\u2019s parameter changes lead to the most significant toxicity reduction in the later layers, driven by TP\u2212subscriptTP\\rm TP_{-}roman_TP start_POSTSUBSCRIPT - end_POSTSUBSCRIPT and AN\u2212subscriptAN\\rm AN_{-}roman_AN start_POSTSUBSCRIPT - end_POSTSUBSCRIPT.", "description": "Figure 3 visualizes the per-layer toxicity reduction achieved by different neuron groups after applying Direct Preference Optimization (DPO).  The x-axis represents the index of the MLP (Multi-Layer Perceptron) layers in the GPT-2 language model, progressing from earlier to later layers. The y-axis shows the amount of toxicity reduction in each layer.  Multiple lines are plotted, each representing a different neuron group categorized by their behavior: TP- (toxic neurons with reduced positive activations), TN+ (toxic neurons with increased negative activations), AP+ (anti-toxic neurons with increased positive activations), and AN- (anti-toxic neurons with reduced negative activations). The figure highlights that the most substantial toxicity reduction occurs in the later layers of the model, primarily driven by the combined effect of TP- and AN- neuron groups. This indicates that DPO's impact is not uniform across layers, with later layers playing a more significant role in mitigating toxicity.", "section": "Tracking toxic feature reduction across neurons"}, {"figure_path": "https://arxiv.org/html/2411.06424/extracted/5987507/Figures/top_3000_to_3200_contributor_illustration.png", "caption": "Figure 4: Activations of the top 100 toxic neurons before and after DPO. Most neurons have negative activations averaged across prompts, both before and after DPO.", "description": "This figure displays the average activation values of the top 100 most toxic neurons across various prompts, before and after applying Direct Preference Optimization (DPO).  A key observation is that the majority of these neurons exhibit negative activation values, both before and after the DPO process. This indicates a substantial portion of these neurons show inhibitory behavior rather than excitatory behavior, and that the effect of DPO on these neurons is not simply a reduction in activation values but a more complex change in activity.", "section": "B Most toxic neurons have negative activations"}]