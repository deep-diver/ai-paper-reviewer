[{"figure_path": "https://arxiv.org/html/2503.01506/x1.png", "caption": "Figure 1: \nWe conduct data clustering analysis using the SlimPajama dataset.\nFor each domain (row), each cell shows the percentage of its clusters that also include samples from other domains (column). E.g., 76.60% of ArXiv\u2019s clusters include Wikipedia samples (1st row, 6th column). The results reveal substantial overlap between domains.", "description": "This figure displays the results of a data clustering analysis performed on the SlimPajama dataset.  The analysis reveals the extent of overlap between different domains within the dataset. Each row represents a domain, and each cell within a row shows the percentage of clusters from that domain that also contain samples from another domain (specified by the column). For example, the value in the first row and sixth column indicates that 76.60% of the clusters originating from the ArXiv domain also include samples from the Wikipedia domain. The overall pattern in the figure highlights substantial overlap and interconnectedness between various domains within the SlimPajama dataset, contradicting the common assumption of distinct domain boundaries in pre-training data.", "section": "1 Introduction"}, {"figure_path": "https://arxiv.org/html/2503.01506/x2.png", "caption": "Figure 2: \n(a) Traditional methods determine domain weights and construct the training dataset by uniformly sampling from each domain.\n(b) SampleMix employs a sample-wise mixing strategy by:\nevaluating sample quality and diversity,\nassigning appropriate weights, and\nconstructing an optimal dataset based on these weights. Dots of the same color represent data from the same domain..", "description": "Figure 2 illustrates the difference between traditional domain-wise data mixing methods and the proposed SampleMix approach. (a) shows the traditional approach where domain weights are determined first and then uniform sampling is performed within each domain. This method ignores the overlap and commonalities among different domains, as well as the sample-specific quality and diversity within each domain. (b) illustrates SampleMix, a novel sample-wise approach. This method dynamically determines domain distributions by systematically evaluating the quality and diversity of each sample.  It assigns appropriate weights based on these evaluations and then constructs an optimal training dataset by sampling each example according to its weight. The colors of dots represent different domains, which highlights that this approach considers data from all domains at the same time.", "section": "2 Method"}, {"figure_path": "https://arxiv.org/html/2503.01506/x3.png", "caption": "(a) Quality Distribution", "description": "The figure shows the distribution of quality scores for each of the six domains in the SlimPajama dataset.  Each domain's distribution is shown as a histogram. The x-axis represents the quality score (ranging from 0 to 10), and the y-axis represents the number of samples.  The distributions illustrate the varying levels of quality present within each domain. For example, some domains show a higher concentration of high-quality samples (scores closer to 10) while others exhibit a broader spread of quality scores, indicating a greater diversity in data quality.", "section": "2.2.3 Analysis of Quality Distribution"}, {"figure_path": "https://arxiv.org/html/2503.01506/x4.png", "caption": "(b) Diversity Distribution", "description": "This figure shows the distribution of diversity scores for samples within each domain of the SlimPajama dataset.  Each domain's diversity is assessed using a combined measure of cluster compactness and cluster separation, reflecting how similar samples are within a cluster and how distinct that cluster is from other clusters.  The x-axis represents the diversity score, and the y-axis represents the frequency (or percentage) of samples with that diversity score.  The figure helps illustrate the variability in diversity within and across different domains of the dataset.", "section": "2.3 Data Diversity Evaluation"}, {"figure_path": "https://arxiv.org/html/2503.01506/x5.png", "caption": "Figure 3: Analysis of SlimPajama dataset. Mean values are marked with a dashed line.", "description": "This figure visualizes the distribution of data quality and diversity scores across six domains within the SlimPajama dataset.  The left panel (a) shows the distribution of quality scores, revealing variations in the average quality of data across different domains.  The right panel (b) displays the distribution of diversity scores, illustrating how diverse the samples are within each domain.  Dashed lines indicate the mean values for each distribution.", "section": "2.2.3 Analysis of Quality Distribution"}, {"figure_path": "https://arxiv.org/html/2503.01506/x6.png", "caption": "Figure 4: Training efficiency comparison. SampleMix reaches the average baseline accuracy at 100k training steps - 1.9 times faster than the averaged baselines.", "description": "This figure shows a comparison of the training efficiency between SampleMix and the average performance of several baseline methods.  The x-axis represents the number of training steps, and the y-axis represents the accuracy achieved on downstream tasks. The plot shows that SampleMix achieves comparable accuracy to the average baseline performance using significantly fewer training steps \u2013 specifically, reaching the average baseline accuracy at approximately 100,000 training steps, which is about 1.9 times faster than the average of the baseline methods.", "section": "4 Results and Analysis"}, {"figure_path": "https://arxiv.org/html/2503.01506/x7.png", "caption": "Figure 5: Average performance of downstream tasks with different weighting factor \u03b1\ud835\udefc\\alphaitalic_\u03b1.", "description": "This figure shows how the weighting factor \u03b1 (alpha) influences the average performance across various downstream tasks.  The x-axis represents different values of \u03b1, ranging from 0.0 to 1.0, which controls the balance between quality and diversity in the data sampling process.  A value of 0.0 means only quality is considered, while 1.0 means only diversity is considered. The y-axis represents the average performance across all downstream tasks. The plot reveals the optimal balance between quality and diversity that yields the highest average performance, illustrating the impact of different \u03b1 values on model performance.  The figure demonstrates the importance of considering both data quality and diversity for optimal model training.", "section": "4.2 Effectiveness of Quality and Diversity"}, {"figure_path": "https://arxiv.org/html/2503.01506/x8.png", "caption": "(a) Proportion of different sampling counts.", "description": "This figure shows the distribution of the number of times each document was sampled during the training process for the condition where the target token budget (Ttgt) equals the total number of tokens in the source dataset (Tsrc).  The x-axis represents the number of times a document was sampled (sampling count), and the y-axis shows the percentage of documents that were sampled that many times.  The data illustrates how SampleMix prioritizes high-quality and diverse documents, resulting in many documents being sampled once or twice.  A smaller percentage of documents were sampled more frequently, or not at all.", "section": "2.4 Data Sampling"}, {"figure_path": "https://arxiv.org/html/2503.01506/x9.png", "caption": "(b) Sampling weight (i.e., p\u2062(x)\ud835\udc5d\ud835\udc65p(x)italic_p ( italic_x )) of different sampling counts.", "description": "This figure's sub-caption describes the relationship between the sampling weight assigned to each data sample and its sampling count, which reflects how many times a particular sample is selected during the training process. In the context of SampleMix, this illustrates how the algorithm prioritizes higher-quality and more diverse samples by assigning them larger sampling weights, leading to increased selection frequency. Conversely, it indicates that lower-quality or less diverse samples may not be chosen as often due to their assigned lower weights. The distribution of weights, therefore, showcases how SampleMix dynamically adjusts to the available data budget, optimizing data diversity, and balancing data quality.", "section": "2.4 Data Sampling"}, {"figure_path": "https://arxiv.org/html/2503.01506/x10.png", "caption": "Figure 6: Analysis of different sampling counts.", "description": "Figure 6 shows the distribution of sampling counts and the corresponding average sampling weights obtained under different token budget settings (Ttgt = Tsrc and Ttgt = Tsrc).  When the target token budget (Ttgt) equals the total tokens in the source dataset (Tsrc), SampleMix prioritizes high-quality samples. As a result, the majority of samples are drawn once (sampling count = 1).  Conversely, when Ttgt is smaller than Tsrc, the model incorporates samples with lower weights to satisfy the token budget.  The figure demonstrates how the model dynamically adapts its sampling strategy based on the available token budget, showcasing SampleMix's flexibility in handling different training scales.", "section": "2.4 Data Sampling"}, {"figure_path": "https://arxiv.org/html/2503.01506/x11.png", "caption": "Figure 7: Samples from different domains, all describing information related to Einstein and Theory of Relativity.", "description": "This figure demonstrates that samples from different datasets, categorized as separate domains, can share significant overlap in terms of topic and semantic content.  The examples shown all discuss aspects of Einstein and the Theory of Relativity, highlighting the limitations of domain-wise data mixing approaches that assume strict separation between datasets.", "section": "2. Analysis of Quality Distribution"}, {"figure_path": "https://arxiv.org/html/2503.01506/x12.png", "caption": "Figure 8: Quality of CommonCrawl Samples may vary significantly.", "description": "This figure shows examples of both low-quality and high-quality samples from the Common Crawl dataset.  The low-quality example consists of short, seemingly random snippets of text focused on sports news, highlighting the inconsistent and fragmented nature of some data. In contrast, the high-quality example is a coherent, well-structured passage about astrophysics, demonstrating the substantial variation in quality found within the dataset.", "section": "2.2 Data Quality Evaluation"}]