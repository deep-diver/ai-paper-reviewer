[{"content": "|   | #N          | Min. | Max. | Avg. |\n|---|-------------|------|------|------|\n| #Training | 119,345      | 1    | 15   | 4.36 |\n| #Evaluation | 1,042       | 1    | 15   | 4.89 |", "caption": "Table 1: The statistics of Trace benchmark. #N is the number of instructions; Min., Max., and Avg. mean the minimum, maximum, and average number of constraints per instruction.", "description": "Table 1 presents a summary of the TRACE benchmark dataset's characteristics. It shows the total number of instructions (#N), the minimum (Min.), maximum (Max.), and average (Avg.) number of constraints per instruction in both the training and evaluation sets of the benchmark.", "section": "4 TRACE Benchmark"}, {"content": "| \n| \n|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|\n| <math alttext=\"\\mathcal{C}=\" class=\"ltx_Math\" display=\"inline\" id=\"S4.T2.1.1.1.m1.1\"><semantics id=\"S4.T2.1.1.1.m1.1a\"><mrow id=\"S4.T2.1.1.1.m1.1.1\" xref=\"S4.T2.1.1.1.m1.1.1.cmml\"><mi class=\"ltx_font_mathcaligraphic\" id=\"S4.T2.1.1.1.m1.1.1.2\" xref=\"S4.T2.1.1.1.m1.1.1.2.cmml\">\ud835\udc9e</mi><mo id=\"S4.T2.1.1.1.m1.1.1.1\" xref=\"S4.T2.1.1.1.m1.1.1.1.cmml\">=</mo><mi id=\"S4.T2.1.1.1.m1.1.1.3\" xref=\"S4.T2.1.1.1.m1.1.1.3.cmml\"></mi></mrow><annotation-xml encoding=\"MathML-Content\" id=\"S4.T2.1.1.1.m1.1b\"><apply id=\"S4.T2.1.1.1.m1.1.1.cmml\" xref=\"S4.T2.1.1.1.m1.1.1\"><eq id=\"S4.T2.1.1.1.m1.1.1.1.cmml\" xref=\"S4.T2.1.1.1.m1.1.1.1\"></eq><ci id=\"S4.T2.1.1.1.m1.1.1.2.cmml\" xref=\"S4.T2.1.1.1.m1.1.1.2\">\ud835\udc9e</ci><csymbol cd=\"latexml\" id=\"S4.T2.1.1.1.m1.1.1.3.cmml\" xref=\"S4.T2.1.1.1.m1.1.1.3\">absent</csymbol></apply></annotation-xml><annotation encoding=\"application/x-tex\" id=\"S4.T2.1.1.1.m1.1c\">\\mathcal{C}=</annotation><annotation encoding=\"application/x-llamapun\" id=\"S4.T2.1.1.1.m1.1d\">caligraphic_C =</annotation></semantics></math> | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 |\n| #Training | 991 | 8,003 | 26,421 | 34,155 | 26,327 | 13,858 | 5,882 | 2,185 | 999 | 464 | 8 | 20 | 20 | 8 | 4 |\n| #Evaluation | 200 | 100 | 100 | 100 | 100 | 100 | 100 | 100 | 100 | 100 | 10 | 10 | 10 | 4 | 4 |", "caption": "Table 2: Constraint number (\ud835\udc9e\ud835\udc9e\\mathcal{C}caligraphic_C) distributions over training and evaluation set in Trace. \ud835\udc9e=i\ud835\udc9e\ud835\udc56\\mathcal{C}=icaligraphic_C = italic_i represents the number of instructions with i\ud835\udc56iitalic_i constraints.", "description": "This table shows the distribution of the number of constraints in each instruction within the TRACE benchmark dataset.  It breaks down the number of training and evaluation set instructions containing 1, 2, 3, ..., up to 15 constraints. This helps in understanding the complexity of instructions in the benchmark and how it's distributed.", "section": "4.1 Construction Pipeline"}, {"content": "| Model | Method | Trace IF-S | Trace IF-M | IFEval S-Acc | IFEval L-Acc | CFBench CSR | CFBench ISR | CFBench PSR |\n|---|---|---|---|---|---|---|---|---|\n| Qwen2-7B | Instruct | 72.5 | 54.5 | 51.6 | 56.4 | 75.8 | 39.1 | 50.2 |\n|  | SFT | 76.0 | 56.1 | 52.3 | 54.2 | 77.8 | 40.4 | 52.9 |\n|  | PPO | 77.0 | 57.7 | 51.4 | 53.8 | 76.2 | 38.8 | 50.6 |\n|  | DPO | 79.0 | 67.2 | 52.7 | 58.2 | 80.0 | 45.1 | 57.9 |\n| IOPO (Ours)<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">Improv.</span></sub> |  | 82.0<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21913.0</span></sub> | 68.9<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21911.7</span></sub> | 59.9<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21917.2</span></sub> | 63.6<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21915.4</span></sub> | 80.7<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21910.7</span></sub> | 47.0<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21911.9</span></sub> | 58.7<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21910.8</span></sub> |\n| Llama3.1-8B | Instruct | 67.5 | 52.9 | 74.3 | 78.6 | 71.4 | 35.7 | 46.9 |\n|  | SFT | 75.5 | 62.9 | 71.0 | 74.1 | 78.4 | 43.2 | 54.7 |\n|  | PPO | 75.0 | 57.3 | 69.9 | 72.3 | 75.9 | 40.9 | 50.7 |\n|  | DPO | 79.0 | 69.2 | 71.5 | 76.5 | 80.8 | 48.1 | 59.8 |\n| IOPO (Ours)<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">Improv.</span></sub> |  | 81.5<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21912.5</span></sub> | 70.7<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21911.5</span></sub> | 78.2<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21916.7</span></sub> | 81.0<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21914.5</span></sub> | 81.8<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21911.0</span></sub> | 49.9<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21911.8</span></sub> | 61.1<sub class=\"ltx_sub\"><span class=\"ltx_text ltx_font_italic\">\u21911.3</span></sub> |", "caption": "Table 3: Main results on in-domain Trace, and out-of-domain IFEval, and CFBench.", "description": "This table presents the main experimental results comparing different instruction following methods (SFT, PPO, DPO, and IOPO) across three benchmark datasets: TRACE (in-domain), IFEval, and CFBench (both out-of-domain).  For each method and dataset, the table shows performance metrics relevant to the specific benchmark, such as IF-S, IF-M (for TRACE), S-Acc, L-Acc (for IFEval), and CSR, ISR, PSR (for CFBench). The results illustrate the improvements achieved by IOPO compared to other methods on both in-domain and out-of-domain data.", "section": "6 Experiments"}, {"content": "| Model | Method | Trace IF-S | Trace IF-M | IFEval S-Acc | IFEval L-Acc | CFBench CSR | CFBench ISR | CFBench PSR |\n|---|---|---|---|---|---|---|---|---|\n| Qwen2-7B | IOPO | 82.0 | 68.9 | 59.9 | 63.6 | 80.7 | 47.0 | 58.7 |\n| Qwen2-7B | w/o Output Pref | 81.0 | 66.7 | 55.1 | 60.5 | 79.4 | 46.6 | 56.3 |\n| Qwen2-7B | w/o Input Pref | 80.9 | 67.1 | 56.7 | 61.9 | 79.7 | 46.8 | 57.0 |\n| Llama3.1-8B | IOPO | 81.5 | 70.7 | 78.2 | 81.0 | 81.8 | 49.9 | 61.1 |\n| Llama3.1-8B | w/o Output Pref | 81.5 | 69.6 | 77.3 | 80.6 | 80.6 | 48.6 | 58.4 |\n| Llama3.1-8B | w/o Input Pref | 79.0 | 69.0 | 77.9 | 80.2 | 80.9 | 48.3 | 59.4 |", "caption": "Table 4: Ablation studies on Trace, IFEval, and CFBench.", "description": "This table presents the results of ablation experiments conducted on three benchmark datasets: TRACE, IFEval, and CFBench.  The experiments analyze the impact of removing either input preference optimization or output preference optimization from the IOPO (Input-Output Preference Optimization) method. By comparing the performance of IOPO with variants that exclude either input or output preference, the table clarifies the relative contributions of each component to the overall performance improvements.", "section": "6 Experiments"}, {"content": "| Method | SFT | DPO | IOPO |\n|---|---|---|---|\n| #Memory | 1\u00d7 | 2\u00d7 | 4\u00d7 |\n| #Training Time | 14.54 h | 26.30 h | 34.27 h |\n| #Inference Speed | 1\u00d7 | 1\u00d7 | 1\u00d7 |", "caption": "Table 5: Analysis on the consumed GPU memory, training time, and inference speed under the same batch size.", "description": "This table presents a comparison of the GPU memory consumption, training time, and inference speed for three different instruction following methods (SFT, DPO, and IOPO) using the same batch size. It helps to understand the computational resource requirements of each method.", "section": "6 Experiments"}, {"content": "| Constraint Type | Constraint Dimension | Description |\n|---|---|---|\n| Content Constraint | Theme Constraint | The generated content should focus on a specific topic or field. |\n|  | Exclusion Constraint | Clearly specify the information or content that should not be included in the generated content. |\n|  | Inclusion Constraint | Clearly specify the particular information or content that must be included in the generated content. |\n|  | Value Constraint | The generated content should not contain information that violates values, such as safety, false information, discrimination, or bias. |\n|  | Privacy Constraint | The generated content should not include details that may infringe on privacy, such as personal data or sensitive information. |\n|  | Numerical Constraint | Limit the length and number of words, sentences, and paragraphs in the generated content, or use numerical precision constraints to ensure accuracy. |\n| Situation Constraint | Role-Playing Constraint | The generated content should be based on a specific role or situational background. |\n|  | Target Audience Constraint | The generated content should target a specific audience, which affects the terminology used, the level of detail provided, and the complexity of the content. |\n|  | Prior Condition Constraint | When a specific intention is met, a particular process should be followed to perform an operation or output specific content. |\n|  | Natural Language Process<br>Background Information Constraint | Add natural language form process information, such as procedures or business processes, to assist in generating answers. |\n|  | Markdown Process<br>Background Information Constraint | Add markdown-formatted process information, such as procedures or business processes, to assist in generating answers. |\n|  | Table Background<br>Information Constraint | Background information is presented in table form, providing a series of markdown-formatted tables to assist in generating answers. |\n|  | Text Background<br>Information Constraint | Background information is presented in text form, providing a series of textual background information to assist in generating answers. |\n| Style Constraint | Tone and Style Constraint | The generated content should adopt a specific tone and style, such as formal, polite, academic, concise, literary, romantic, or sci-fi. |\n|  | Emotion Constraint | The generated content should express a specific emotion or mood, such as ensuring the content is positive, inspiring, or empathetic. |\n|  | Linguistic Characteristics Constraint | Use specific linguistic features, such as metaphors, personification, and other rhetorical devices. |\n|  | Multilingual Constraint | The content should be generated in a specific language or switch between languages according to complex patterns. |\n| Format Constraint | Output Format Constraint | The generated content should be in a specific data format, such as tables, JSON, HTML, LaTeX, or Markdown. |\n|  | Text Pattern Constraint | Use specified fonts and font sizes, or special emoji, to ensure readability across different devices and platforms. |\n|  | Grammar Structure Constraint | The generated content should strictly follow specific grammatical structures, such as subject-predicate-object, subject-verb, etc. |\n|  | Citation Constraint | The generated content should include citations to sources, providing reliable sources and literature support; follow specific citation formats or reference styles. |\n|  | Numbering and List Constraint | The generated content should use numbered lists or bullet points to organize information. |\n|  | Hierarchical Structure Constraint | The generated content should be organized according to a specific hierarchical structure, such as using headings and subheadings. |\n|  | Template Constraint | The generated content should follow a specific layout or format, such as text alignment, paragraph indentation, and structural templates like introduction-body-conclusion. |\n| Example Constraint | Positive Example Constraint | Provide examples that meet the requirements, and require the model to generate content based on these examples. |\n|  | Negative Example Constraint | Provide examples that do not meet the requirements, and require the model to avoid generating content similar to these examples. |", "caption": "Table 6: Five constraint types and 26 constraint dimensions with their corresponding descriptions.", "description": "This table presents a taxonomy of constraints used in complex instruction following. It categorizes 26 individual constraint dimensions into five main constraint types: Content, Situation, Style, Format, and Example constraints.  For each dimension, a detailed description is provided to clarify its meaning and application in instruction design.", "section": "4.1 Construction Pipeline"}]